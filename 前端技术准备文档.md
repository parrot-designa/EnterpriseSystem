# React Antd Admin 前端项目技术准备文档

## 📋 项目概述

**项目名称**：react-antd-admin

**技术架构**：React 17 + Ant Design 5 + TypeScript + Vite

**项目定位**：企业级后台管理系统前端界面，用于对接后端 Spring Boot 微服务

---

## 🔧 一、环境要求

### 1.1 Node.js 环境

| 组件 | 版本要求 | 推荐版本 | 说明 |
|------|---------|---------|------|
| **Node.js** | ≥ 14.0.0 | ≥ 16.0.0（推荐 LTS 版本） | Vite 构建工具要求 |
| **npm** | ≥ 6.14.0 | ≥ 8.0.0 | Node.js 包管理器 |
| **yarn** | ≥ 1.22.0 | ≥ 1.22.0 | 可选，推荐使用（本项目使用 yarn） |

#### ✅ 如何检查 Node.js 版本

```bash
# 检查 Node.js 版本
node -v

# 检查 npm 版本
npm -v

# 检查 yarn 版本
yarn -v
```

#### ❌ 如果版本不满足要求，请升级

**方式 1：从官网下载安装（推荐）**
- 访问 [Node.js 官网](https://nodejs.org/)
- 下载 LTS（长期支持）版本（推荐 16.x 或 18.x）
- 安装后重新检查版本

**方式 2：使用 nvm 管理 Node.js 版本（推荐开发者使用）**

```bash
# 安装 nvm（如果未安装）
# macOS/Linux
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash

# Windows
# 下载 nvm-windows：https://github.com/coreybutler/nvm-windows/releases

# 安装最新的 LTS 版本
nvm install --lts

# 使用指定版本
nvm use 16

# 设置默认版本
nvm alias default 16
```

---

### 1.2 包管理器

本项目使用 **yarn** 作为包管理器。

#### 📦 安装 yarn

```bash
# 使用 npm 安装 yarn
npm install -g yarn

# 验证安装
yarn -v
```

#### 🔄 切换为 npm（如果不想用 yarn）

如果需要使用 npm，可以删除 `yarn.lock` 文件，并使用 npm 命令：

```bash
# 删除 yarn.lock
rm yarn.lock

# 使用 npm 安装依赖
npm install

# 运行项目
npm run dev
```

---

### 1.3 代码编辑器（推荐）

| 编辑器 | 说明 | 推荐插件 |
|--------|------|---------|
| **VS Code** | 强烈推荐 | ESLint、Prettier、TypeScript、React/Redux snippets |
| **WebStorm** | JetBrains 系列 | 内置支持 TypeScript 和 React |
| **Sublime Text** | 轻量级编辑器 | 需要手动配置 |

---

## 📚 二、技术栈说明

### 2.1 核心框架

| 技术 | 版本 | 用途 |
|------|------|------|
| **React** | ^17.0.0 | 前端 UI 框架 |
| **TypeScript** | ^4.3.2 | JavaScript 的超集，提供类型安全 |
| **Vite** | ^2.6.4 | 新一代前端构建工具，提供快速的开发体验 |

### 2.2 UI 组件库

| 技术 | 版本 | 用途 |
|------|------|------|
| **Ant Design** | ^5.0.2 | 企业级 UI 组件库 |
| **@emotion/react** | ^11.5.0 | CSS-in-JS 样式解决方案 |

### 2.3 状态管理和路由

| 技术 | 版本 | 用途 |
|------|------|------|
| **Redux Toolkit** | ^1.4.0 | 状态管理 |
| **React Router** | ^6.0.0 | 前端路由管理 |
| **React Redux** | ^7.2.6 | React 和 Redux 的绑定 |

### 2.4 网络请求和工具库

| 技术 | 版本 | 用途 |
|------|------|------|
| **Axios** | ^0.24.0 | HTTP 客户端，用于发送 API 请求 |
| **Lodash** | ^4.17.21 | JavaScript 工具库 |
| **Mock.js** | ^1.1.0 | 模拟数据生成 |
| **query-string** | ^7.0.1 | URL 查询字符串解析 |

### 2.5 图表和其他

| 技术 | 版本 | 用途 |
|------|------|------|
| **Recharts** | ^2.1.13 | 数据可视化图表库 |
| **Driver.js** | ^0.9.8 | 用户引导和页面漫游 |
| **React Intl** | ^5.23.0 | 国际化支持 |

---

## 🚀 三、项目安装和运行

### 3.1 克隆项目（如果还没有）

```bash
# 如果项目在本地，跳过此步骤
cd /path/to/EnterpriseSystem/react-antd-admin
```

### 3.2 安装依赖

```bash
# 进入项目目录
cd react-antd-admin

# 使用 yarn 安装依赖（推荐）
yarn install

# 或使用 npm
npm install
```

#### ⏱️ 预计安装时间

- 首次安装：约 3-5 分钟（取决于网络速度）
- 后续启动：约 10-30 秒

#### ❗ 常见安装问题

**问题 1：网络慢或安装失败**

```bash
# 使用淘宝镜像加速
yarn config set registry https://registry.npmmirror.com

# 重新安装
yarn install
```

**问题 2：权限错误（macOS/Linux）**

```bash
# 使用 sudo 安装（不推荐，最好修复 npm 权限）
sudo yarn install

# 或修复 npm 权限
mkdir ~/.npm-global
npm config set prefix '~/.npm-global'
export PATH=~/.npm-global/bin:$PATH
```

**问题 3：依赖冲突**

```bash
# 清理缓存后重新安装
yarn cache clean
rm -rf node_modules yarn.lock
yarn install
```

---

### 3.3 启动开发服务器

```bash
# 启动开发服务器
yarn dev

# 或使用 npm
npm run dev
```

#### 🌐 访问地址

启动成功后，浏览器会自动打开：

```
http://localhost:8888
```

如果端口 8888 被占用，Vite 会自动选择其他端口（如 8889、8890）。

#### ⚙️ 修改默认端口

编辑 `vite.config.ts`：

```typescript
export default defineConfig({
  server: {
    port: 3000, // 修改为你想要的端口
  },
});
```

或在 `.env.local` 文件中配置：

```bash
VITE_PORT=3000
```

---

### 3.4 构建生产版本

```bash
# 构建生产版本
yarn build

# 或使用 npm
npm run build
```

构建完成后，生成的文件在 `dist/` 目录下。

---

## 🔌 四、与后端 API 对接

### 4.1 API 基础地址配置

在 `vite.config.ts` 中配置代理：

```typescript
server: {
  port: 8888,
  proxy: {
    '/api': {
      target: 'http://localhost:8080', // 后端服务地址
      rewrite: (path) => path.replace(/^\/api/, '/api'),
    },
  },
},
```

或在 `.env.local` 文件中配置：

```bash
VITE_API_BASE_URL=http://localhost:8080
```

### 4.2 后端 API 接口示例

根据你的后端项目，可用的 API 接口：

| 功能 | 方法 | URL | 说明 |
|------|------|-----|------|
| 创建部门 | POST | /api/v1/department | 添加新部门 |
| 查询部门列表 | GET | /api/v1/department/list | 获取所有部门 |
| 查询部门树 | GET | /api/v1/department/tree | 获取部门树形结构 |
| 查询单个部门 | GET | /api/v1/department/{id} | 根据 ID 查询 |
| 更新部门 | PUT | /api/v1/department | 更新部门信息 |
| 删除部门 | DELETE | /api/v1/department/{id} | 删除指定部门 |
| 统计部门数量 | GET | /api/v1/department/count | 获取部门总数 |

### 4.3 API 请求示例（Axios）

```typescript
import axios from 'axios';

// 创建部门
const createDepartment = async (data: any) => {
  const response = await axios.post('/api/v1/department', data);
  return response.data;
};

// 查询部门列表
const getDepartmentList = async () => {
  const response = await axios.get('/api/v1/department/list');
  return response.data;
};

// 查询部门树
const getDepartmentTree = async () => {
  const response = await axios.get('/api/v1/department/tree');
  return response.data;
};
```

---

## 🛠️ 五、开发工具和脚本

### 5.1 可用的 npm scripts

| 命令 | 说明 |
|------|------|
| `yarn dev` | 启动开发服务器 |
| `yarn build` | 构建生产版本 |
| `yarn serve` | 预览生产构建 |
| `yarn lint` | 运行 ESLint 检查代码 |
| `yarn format` | 格式化代码（Prettier + ESLint） |

### 5.2 代码规范检查

```bash
# 运行 ESLint 检查
yarn lint

# 自动修复问题
yarn format
```

---

## 📖 六、项目结构说明

```
react-antd-admin/
├── public/              # 静态资源
├── src/                 # 源代码
│   ├── assets/          # 图片、字体等资源
│   ├── components/      # 通用组件
│   ├── pages/           # 页面组件
│   ├── services/        # API 服务
│   ├── store/           # Redux 状态管理
│   ├── utils/           # 工具函数
│   ├── App.tsx          # 根组件
│   └── main.tsx         # 入口文件
├── .env.local           # 环境变量（本地）
├── package.json         # 项目配置
├── tsconfig.json        # TypeScript 配置
├── vite.config.ts       # Vite 配置
└── README.md            # 项目说明
```

---

## ⚠️ 七、常见问题解决

### Q1: Node.js 版本过低怎么办？

**错误信息**：
```
Error: The engine "node" is incompatible with this module. Expected version ">=14.0.0"
```

**解决方法**：
升级 Node.js 到 14+ 版本（推荐 16.x 或 18.x LTS 版本）

### Q2: 端口被占用怎么办？

**错误信息**：
```
Error: listen EADDRINUSE: address already in use :::8888
```

**解决方法**：
```bash
# 方式 1：修改 vite.config.ts 中的端口
# 方式 2：杀死占用端口的进程
# macOS/Linux
lsof -ti:8888 | xargs kill -9

# Windows
netstat -ano | findstr :8888
taskkill /PID <进程ID> /F
```

### Q3: 安装依赖时报错 "Cannot find module 'xxx'"

**解决方法**：
```bash
# 清理缓存并重新安装
yarn cache clean
rm -rf node_modules yarn.lock
yarn install
```

### Q4: TypeScript 类型错误

**解决方法**：
```bash
# 重新生成类型文件
yarn build --types
```

---

## 📝 八、开发检查清单

在开始开发前，请确保：

- [ ] ✅ Node.js 版本 ≥ 14.0.0（推荐 ≥ 16.0.0）
- [ ] ✅ 已安装 yarn（或 npm）
- [ ] ✅ 已安装 VS Code（或其他代码编辑器）
- [ ] ✅ 后端服务正常运行在 `http://localhost:8080`
- [ ] ✅ 已运行 `yarn install` 安装依赖
- [ ] ✅ 能成功启动 `yarn dev` 并访问 `http://localhost:8888`
- [ ] ✅ 已配置 API 代理到后端服务

---

## 🎯 九、下一步开发建议

### 9.1 创建部门管理页面

根据后端 API，建议创建以下页面：

1. **部门列表页面** (`src/pages/Department/List.tsx`)
   - 展示部门列表（表格或树形结构）
   - 支持搜索、筛选
   - 支持新建、编辑、删除操作

2. **部门表单组件** (`src/components/DepartmentForm.tsx`)
   - 新建/编辑部门表单
   - 表单验证
   - 父部门选择（树形选择器）

3. **API 服务封装** (`src/services/department.ts`)
   - 封装部门相关的 API 调用
   - 使用 TypeScript 定义类型

### 9.2 与后端对接步骤

1. **查看后端 API 文档**（本文档第四节）
2. **使用 Apifox 测试后端接口**，确保后端正常工作
3. **在前端封装 API 调用**
4. **开发页面 UI**
5. **联调测试**

---

## 📞 十、技术支持

如果遇到问题：

1. 查看本文档的"常见问题解决"部分
2. 查看 Ant Design 官方文档：https://ant.design/
3. 查看 React 官方文档：https://react.dev/
4. 查看 Vite 官方文档：https://vitejs.dev/

---

**祝开发顺利！🎉**
